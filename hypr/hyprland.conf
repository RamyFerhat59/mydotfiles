#####################################################################################

 ██████╗ ██████╗ ███╗   ██╗███████╗██╗ ██████╗ ███████╗
██╔════╝██╔═══██╗████╗  ██║██╔════╝██║██╔════╝ ██╔════╝
██║     ██║   ██║██╔██╗ ██║█████╗  ██║██║  ███╗███████╗
██║     ██║   ██║██║╚██╗██║██╔══╝  ██║██║   ██║╚════██║
╚██████╗╚██████╔╝██║ ╚████║██║     ██║╚██████╔╝███████║
 ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝     ╚═╝ ╚═════╝ ╚══════╝       

#########################################################################################
#variables
$volume = /home/bronzzking/.config/hypr/scripts/volume
$brightness = /home/bronzzking/.config/hypr/scripts/brightness
monitor = DP-1, 1920x1080@165, 0x0, 1 
monitor = HDMI-A-1, 1920x1080@75, 1920x0, 1 
#defaultworkspaces
workspace = 1, monitor:DP-1, default:true
workspace = 2, monitor:DP-1
workspace = 3, monitor:DP-1
workspace = 4, monitor:DP-1
workspace = 5, monitor:HDMI-A-1, default:true
workspace = 6, monitor:HDMI-A-1
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:HDMI-A-1
workspace = 9, monitor:HDMI-A-1

# Status bar :) 
exec-once=waybar
# Notification 
exec-once=dunst
# Wallpaper
exec-once=swaybg -o \* -i ~/.config/hypr/wallpapers/AnimeWaiting.png -m fill
# For screen sharing 
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# For keyboard 
exec-once=fcitx5 -D
# My Custom Start Page (Bento)
exec-once=~/.config/hypr/scripts/startpage.sh

# Bluetooth
exec-once=blueman-applet # Make sure you have installed blueman + blueman-utils

# Screen Sharing 
exec-once=systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=~/.config/hypr/scripts/screensharing.sh

#config
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1

input {
  # Remap Capslock -> Esc for Vim users  
  kb_layout = us
  kb_options = caps:ctrl_modifier
  repeat_rate=50
  repeat_delay=240
  touchpad {
    disable_while_typing=1
    natural_scroll=1
    clickfinger_behavior=1
    middle_button_emulation=0
    tap-to-click=1
  }
}


gestures { 
  workspace_swipe=true 
  workspace_swipe_min_speed_to_force=5
}

general {
    layout=dwindle
    sensitivity=2.0 # for mouse cursor
    gaps_in=11.8
    gaps_out=15.5
    border_size=2
    col.active_border=0xff5e81ac
    col.inactive_border=0x66333333

    apply_sens_to_raw=0 
}

decoration {
    rounding=1
    # blur {
    #     enabled = true
    #     size = 3
    #     passes = 1
    #     new_optimizations = true
    #     new_optimizations = true
    # }
    blur=1
    blur_size=13  # minimum 1
    blur_passes=3  # minimum 1, more passes = more resource intensive.
    blur_new_optimizations = true   
    screen_shader = /home/bronzzking/.config/hypr/blue-light.frag
    drop_shadow=true
    shadow_range=30
    col.shadow=0xffa7caff #86AAEC
    col.shadow_inactive=0x50000000
}

# Blur for waybar 
blurls=waybar

animations {
    enabled=1
    bezier=overshot,0.13,0.99,0.29,1.1
    animation=windows,1,4,overshot,slide
    animation=fade,1,10,default
    animation=workspaces,1,8.8,overshot,slide
    animation=border,1,14,default
}

dwindle {
    pseudotile=1 # enable pseudotiling on dwindle
    force_split=0
    no_gaps_when_only = true
}

master {
  new_on_top=true
  no_gaps_when_only = true
}

misc {
  disable_hyprland_logo=true
  disable_splash_rendering=true
  mouse_move_enables_dpms=true
  vfr = true
  hide_cursor_on_touch = true
}

########################################################################################
██╗    ██╗██╗███╗   ██╗██████╗  ██████╗ ██╗    ██╗███████╗    ██████╗ ██╗   ██╗██╗     ███████╗███████╗
██║    ██║██║████╗  ██║██╔══██╗██╔═══██╗██║    ██║██╔════╝    ██╔══██╗██║   ██║██║     ██╔════╝██╔════╝
██║ █╗ ██║██║██╔██╗ ██║██║  ██║██║   ██║██║ █╗ ██║███████╗    ██████╔╝██║   ██║██║     █████╗  ███████╗
██║███╗██║██║██║╚██╗██║██║  ██║██║   ██║██║███╗██║╚════██║    ██╔══██╗██║   ██║██║     ██╔══╝  ╚════██║
╚███╔███╔╝██║██║ ╚████║██████╔╝╚██████╔╝╚███╔███╔╝███████║    ██║  ██║╚██████╔╝███████╗███████╗███████║
 ╚══╝╚══╝ ╚═╝╚═╝  ╚═══╝╚═════╝  ╚═════╝  ╚══╝╚══╝ ╚══════╝    ╚═╝  ╚═╝ ╚═════╝ ╚══════╝╚══════╝╚══════╝
########################################################################################


# Float Necessary Windows
# windowrule = float,pavucontrol
windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = float,class:^(org.twosheds.iwgtk)$
# windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$

windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$
# Increase the opacity 
windowrule=opacity 0.92,Thunar
windowrule=opacity 0.96,discord

windowrule=opacity 1,neovim
bindm=SUPER,mouse:272,movewindow
bindm=SUPER,mouse:273,resizewindow

###########################################

██╗  ██╗███████╗██╗   ██╗    ██████╗ ██╗███╗   ██╗██████╗ ██╗███╗   ██╗ ██████╗ ███████╗
██║ ██╔╝██╔════╝╚██╗ ██╔╝    ██╔══██╗██║████╗  ██║██╔══██╗██║████╗  ██║██╔════╝ ██╔════╝
█████╔╝ █████╗   ╚████╔╝     ██████╔╝██║██╔██╗ ██║██║  ██║██║██╔██╗ ██║██║  ███╗███████╗
██╔═██╗ ██╔══╝    ╚██╔╝      ██╔══██╗██║██║╚██╗██║██║  ██║██║██║╚██╗██║██║   ██║╚════██║
██║  ██╗███████╗   ██║       ██████╔╝██║██║ ╚████║██████╔╝██║██║ ╚████║╚██████╔╝███████║
╚═╝  ╚═╝╚══════╝   ╚═╝       ╚═════╝ ╚═╝╚═╝  ╚═══╝╚═════╝ ╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚══════╝
###########################################

# launch apps bindings
bind = SUPER, Q,killactive
bind = SUPER, Left, movecurrentworkspacetomonitor, DP-1
bind = SUPER, Right, movecurrentworkspacetomonitor, HDMI-A-1
bind = SUPER, F,fullscreen,1
bind = SUPER SHIFT,F,fullscreen,0
bind = SUPER CTRL,Q,exit,
windowrule = workspace 3 silent, alacritty
bind = SUPER, A, exec, [workspace 3 silent;noanim] alacritty
windowrule = workspace 1 silent, UnrealEditor
bind = SUPER, U, exec, [workspace 4 silent;noanim] UnrealEditor
windowrule = workspace 8 silent, alacritty -e musikcube
bind = SUPER, M, exec, [workspace 8 silent;noanim] alacritty -e musikcube
windowrule = workspace 8 silent, flatpak run io.bassi.Amberol
bind = SUPER, L, exec, [workspace 8 silent;noanim] flatpak run io.bassi.Amberol
windowrule = workspace 8 silent, nicotine
bind = SUPER, N, exec, [workspace 8 silent;noanim] nicotine
windowrule = workspace 2 silent, librewolf
bind = ALT, F, exec, [workspace 2 silent;noanim] librewolf
windowrule = workspace 4 silent, steam
bind = SUPER, S, exec, steam
# windowrule = workspace 5 silent, brave
# bind = SUPER, G, exec, [workspace 5 silent;noanim] brave
windowrule = workspace 9 silent, pavucontrol
flatpak run com.github.wwmm.easyeffects
bind = SUPER, O, exec, [workspace 9 silent;noanim] pavucontrol
windowrule = workspace 9 silent, flatpak run com.github.wwmm.easyeffects
bind = SUPER, E, exec, [workspace 9 silent;noanim] flatpak run com.github.wwmm.easyeffects
windowrule = workspace 7 silent,  webcord --ignore-gpu-blocklist  --ozone-platform=wayland -enable-features=VaapiVideoDecoder --enable-gpu-rasterization --enable-zero-copy
bind = ALT, D, exec, [workspace 7 silent;noanim] /usr/lib/electron24/electron /usr/lib/webcord --ignore-gpu-blocklist --ozone-platform=wayland --enable-features=VaapiVideoDecoder --enable-gpu-rasterization --enable-zero-copy
$scriptsDir = $HOME/.config/hypr/scripts

bind=SUPER,G,submap,resize
# will start a submap called "resize"
submap=resize
windowrule = workspace 5 silent, brave
windowrule = workspace 5 silent, chromium
# bind = SUPER, G, exec, [workspace 5 silent;noanim] brave
# sets repeatable binds for resizing the active window
binde=,B,exec, [workspace 5 silent;noanim] brave
binde=,C,exec, [workspace 5 silent;noanim] chromium
# use reset to go back to the global submap
bind=,escape,submap,reset 
# will reset the submap, meaning end the current one and return to the global one
submap=reset

# alternante menu launcher rofi -show drun
bind = SUPER, D, exec, /home/bronzzking/.config/hypr/scripts/menu
bind = SUPER, J, layoutmsg, cyclenext
bind = SUPER, K, layoutmsg, cycleprev
bind = SUPER, M, exec, hyprctl dispatch splitratio 0.3
bind = SUPER, X, exec, archlinux-logout
# bind = SUPER, H, exec, ~/.config/hypr/gamemode.sh
# Special Keys
bind = SUPER, F11, exec, $volume up
bind = SUPER, F10, exec, $volume down
bind = SUPER , F9, exec, $volume mute
bind = , xf86audioplay, exec, playerctl play-pause
bind = , xf86audionext, exec, playerctl next
bind = , xf86audioprev, exec, playerctl previous
bind = , xf86audiostop, exec, playerctl stop
bind = SUPER, F3, exec, $brightness up
bind = SUPER, F4, exec, $brightness down

# Backlight control
bind = SUPER SHIFT, equal, submap, backlight
submap = backlight
bind = , equal, exec, $backlight --inc
bind = , minus, exec, $backlight --dec
bind = , escape, submap, reset
submap = reset

# Volume control
bind = SUPER, equal, submap, volume
submap = volume
bind = SUPER , equal, exec, $volume --inc
bind = SUPER , minus, exec, $volume --dec
bind = , 0, exec, $volume --toggle
bind = , 9, exec, $volume --toggle-mic
bind = , escape, submap, reset
submap = reset

# Resize
bind = SUPER SHIFT, H, resizeactive,-50 0
bind = SUPER SHIFT, L, resizeactive,50 0
bind = SUPER SHIFT, K, resizeactive,0 -50
bind = SUPER SHIFT, J, resizeactive,0 50

# Move
bind = SUPER CTRL, H, movewindow, l
bind = SUPER CTRL, L, movewindow, r
bind = SUPER CTRL, K, movewindow, u
bind = SUPER CTRL, J, movewindow, d

# Move focus with mainMod + arrow keys
bind=SUPER, J,movefocus,d
bind=SUPER, K,movefocus,u
bind=SUPER, H,movefocus,l
bind=SUPER, L,movefocus,r

# Special workspace
bind = SUPER SHIFT, U, movetoworkspace, special
bind = SUPER, U, togglespecialworkspace,

# Switch workspaces with mainMod + [0-9]
bind = CTRL , 1, workspace, 1
bind = CTRL, 2, workspace, 2
bind = CTRL, 3, workspace, 3
bind = CTRL, 4, workspace, 4
bind = CTRL, 5, workspace, 5
bind = CTRL, 6, workspace, 6
bind = CTRL, 7, workspace, 7
bind = CTRL, 8, workspace, 8
bind = CTRL, 9, workspace, 9
bind = CTRL, 10, workspace, 10

# Move active window and follow to workspace
bind = SUPER CTRL, q, movetoworkspace, 1
bind = SUPER CTRL, w, movetoworkspace, 2
bind = SUPER CTRL, e, movetoworkspace, 3
bind = SUPER CTRL, r, movetoworkspace, 4
bind = SUPER CTRL, t, movetoworkspace, 5
bind = SUPER CTRL, y, movetoworkspace, 6
bind = SUPER CTRL, u, movetoworkspace, 7
bind = SUPER CTRL, o, movetoworkspace, 8
bind = SUPER CTRL, p, movetoworkspace, 9
bind = SUPER CTRL, h, movetoworkspace, -1
bind = SUPER CTRL, l, movetoworkspace, +1

# Move workspace but don't change workspace
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, 6, movetoworkspacesilent, 6
bind = SUPER SHIFT, 7, movetoworkspacesilent, 7
bind = SUPER SHIFT, 8, movetoworkspacesilent, 8
bind = SUPER SHIFT, 9, movetoworkspacesilent, 9
bind = SUPER SHIFT, 10, movetoworkspacesilent, 10
# bind = SUPER SHIFT, Left, movetoworkspacesilent, -1
# bind = SUPER SHIFT, Right, movetoworkspacesilent, +1

# Scroll through existing workspaces with mainMod + scroll
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up, workspace, e-1
bind = SUPER, period, workspace, e+1
bind = SUPER, comma, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# bind = SUPER, G, togglegroup
bind = SUPER, tab, workspace, m+1
bind = SUPER SHIFT, tab, workspace, m-1
# bind = ALT, tab, workspace, m+1
# bind = ALT SHIFT, tab, workspace, m-1

bind = SUPER, O, exec, $colorpicker
bind = SUPER SHIFT, O, exec, $term --class hyprpicker --hold -e hyprpicker
bind = SUPER CTRL, S, exec, $wofi_beats

# Screenshot keybindings
bind = , Print, exec, $screenshot --now
bind = SUPER, Print, exec, $screenshot --in5
bind = SHIFT, Print, exec, $screenshot --in10
bind = CTRL, Print, exec, $screenshot --win
bind = SUPER CTRL, Print, exec, $screenshot --area
bind = SUPER SHIFT, C,exec,bash ~/.config/hypr/scripts/hyprPicker.sh
bind = SUPER SHIFT, E,exec,wlogout
bind = SUPER, T, togglefloating,

# Screen shot 
bind=SUPER SHIFT, S,exec,grim -g "$(slurp)" - | swappy -f -
# Screen recorder
# bind=SUPERSHIFT,R,exec,wf-recorder -g "$(slurp)"
# Emoji selector 
# bind=SUPER,E,exec,rofi -modi emoji -show emoji
bind=SUPER SHIFT, RETURN,layoutmsg,swapwithmaster
